<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mehrshad Rokni - China University Admissions</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Vazirmatn for Persian, Noto Sans SC for Chinese -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Vazirmatn:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Applying custom fonts */
        body {
            font-family: sans-serif;
            overflow-x: hidden; /* Prevent horizontal scroll */
            overflow-y: auto; /* Allow vertical scroll if content overflows */
        }
        .font-chinese {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .font-english {
            font-family: 'Vazirmatn', sans-serif;
        }

        /* --- Glassmorphism Effect for Buttons --- */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: background 0.3s ease, border 0.3s ease, transform 0.3s ease;
        }
        .glass-effect:hover {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: translateY(-2px); /* Slight lift on hover */
        }

        /* --- Tooltip for Price Info --- */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }
        .tooltip-text {
            visibility: hidden;
            width: 220px; /* Increased width for new text */
            background-color: rgba(0,0,0,0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the icon */
            left: 50%;
            margin-left: -110px; /* Adjusted margin */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }
        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* --- Animations --- */
        @keyframes fadeInSlideUp {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn { /* A simpler fade-in for corner elements */
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes kenBurnsEffect {
            0% { transform: scale(1.1) rotate(1deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        @keyframes scaleX {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        /* --- Utility Classes --- */
        .animate-intro {
            opacity: 0;
            animation: fadeInSlideUp 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .animate-fade {
            opacity: 0;
            animation: fadeIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        .bg-image-animate {}

        /* --- Classic Graphic Elements (Now Responsive) --- */
        .decorative-line::before,
        .decorative-line::after {
            content: '';
            display: block;
            width: 60px; /* Default width for mobile */
            height: 1px;
            background-color: rgba(255, 255, 255, 0.7);
            margin: 1rem auto;
            transform: scaleX(0);
            transform-origin: center;
            animation: scaleX 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 800ms forwards;
        }

        /* On screens 768px and wider (tablets and up), apply richer effects */
        @media (min-width: 768px) {
            .decorative-line::before,
            .decorative-line::after {
                width: 80px;
            }
            .bg-image-animate {
                animation: kenBurnsEffect 20s ease-out forwards;
            }
        }

        /* --- Staggered Animation Delays --- */
        .delay-300 { animation-delay: 300ms; }
        .delay-600 { animation-delay: 600ms; }
        .delay-900 { animation-delay: 900ms; }
        .delay-1200 { animation-delay: 1200ms; }
        .delay-1500 { animation-delay: 1500ms; }
        .delay-1800 { animation-delay: 1800ms; }
        .delay-2100 { animation-delay: 2100ms; }
    </style>
</head>
<body class="bg-black">

    <main class="relative w-full min-h-screen overflow-hidden">
        <!-- Background Image Container -->
        <div class="absolute inset-0 z-0 h-full">
            <img src="back.webp" alt="Background Image" class="w-full h-full object-cover object-center bg-image-animate">
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/20"></div>
        </div>

        <!-- Yuan Price Display -->
        <div dir="rtl" class="animate-fade delay-1500 absolute top-4 right-4 sm:top-6 sm:right-6 z-20">
            <div class="glass-effect rounded-full px-4 py-2 flex items-center space-x-3 shadow-lg">
                <div class="tooltip-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle text-white/50" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.064.293.006.399.287.47l.45.082.082-.38-.29-.071c-.293-.07-.352-.176-.288-.469l.738-3.468c.064-.293-.006-.399-.287-.47L8 9.58l-.205-.098.082-.38.29.071c.293.07.352.176.288.469l-.738 3.468c-.064.293.006.399.287.47l.45.082.082-.38-.29-.071c-.293-.07-.352-.176-.288-.469L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                    <span id="tooltip-text" class="tooltip-text font-english">نرخ ارز در حال به‌روزرسانی است.</span>
                </div>
                <span class="text-lg">🇨🇳</span>
                <span class="font-english text-sm text-white/80">نرخ یوان:</span>
                <span id="yuan-price" class="font-english text-base font-bold text-cyan-300 min-w-[60px] text-center">...</span>
                <span id="last-updated" class="font-english text-xs text-white/40"></span>
            </div>
        </div>

        <!-- Content Container -->
        <div class="relative z-10 flex flex-col items-center justify-center min-h-screen text-white text-center p-4 md:p-8">
            
            <div class="animate-intro delay-300">
                <h1 class="font-chinese text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-bold tracking-wider" style="text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.6);">
                    梅赫沙德 · 罗克尼
                </h1>
            </div>
            
            <div class="animate-intro delay-600 decorative-line"></div>
            
            <div class="animate-intro delay-900">
                <p class="font-english text-lg sm:text-xl md:text-2xl lg:text-3xl font-light tracking-widest md:tracking-[0.2em]" style="text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.7);">
                    China University Admissions
                </p>
            </div>

            <div class="animate-intro delay-1200 mt-10">
                <a href="services.html" class="glass-effect font-english rounded-full px-8 py-3 text-base sm:text-lg tracking-widest text-white/90 hover:text-white shadow-lg">
                    Explore Services
                </a>
            </div>

            <div class="animate-intro delay-1800 mt-8 flex space-x-4">
                <a href="instagram://user?username=mehrshadrokni" target="_blank" rel="noopener noreferrer" class="glass-effect rounded-full p-3 text-white/70 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <a href="tg://resolve?domain=mehrshaw" target="_blank" rel="noopener noreferrer" class="glass-effect rounded-full p-3 text-white/70 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m22 2-7 20-4-9-9-4Z"></path><path d="M22 2 11 13"></path>
                    </svg>
                </a>
            </div>

            <!-- WeChat QR Codes Section -->
            <div class="animate-intro delay-2100 mt-12 flex flex-row items-stretch justify-center gap-4 sm:gap-8 md:gap-12 pb-8">
                
                <!-- Mehrshad's QR Code Card -->
                <div class="glass-effect rounded-2xl p-3 sm:p-4 text-center flex flex-col items-center">
                    <img src="MehrshadRokni.jpg" alt="WeChat QR Code for Mehrshad Rokni" class="w-28 h-28 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-lg mx-auto shadow-lg">
                    <p class="font-english mt-3 sm:mt-4 text-sm sm:text-base text-white/90 tracking-wider">Mehrshad Rokni</p>
                </div>
                
                <!-- Hamid's QR Code Card -->
                <div class="glass-effect rounded-2xl p-3 sm:p-4 text-center flex flex-col items-center">
                    <img src="HamidMahmoudi.jpg" alt="WeChat QR Code for Hamid Mahmoudi" class="w-28 h-28 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-lg mx-auto shadow-lg">
                    <p class="font-english mt-3 sm:mt-4 text-sm sm:text-base text-white/90 tracking-wider">Hamid Mahmoudi</p>
                </div>

            </div>

        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const priceElement = document.getElementById('yuan-price');
            const lastUpdatedElement = document.getElementById('last-updated');
            const tooltipTextElement = document.getElementById('tooltip-text');

            const updatePriceDisplay = (price, dateStr, source) => {
                const formattedPrice = Math.round(price).toLocaleString('fa-IR');
                priceElement.textContent = `${formattedPrice} تومان`;
                
                if (dateStr) {
                    const parts = dateStr.split(' ');
                    const datePart = parts[0];
                    const timePart = parts.length > 1 ? ` - ${parts[1]}` : '';
                    lastUpdatedElement.textContent = `(${datePart}${timePart})`;
                } else {
                    lastUpdatedElement.textContent = `(بروزرسانی شده)`;
                }
                tooltipTextElement.textContent = `نرخ ارز از سرویس ${source} دریافت شده است.`;
            };

            const setFallbackPrice = () => {
                priceElement.textContent = '~ ۸,۷۰۰ تومان'; 
                lastUpdatedElement.textContent = '(نرخ لحظه‌ای در دسترس نیست)';
                tooltipTextElement.textContent = 'سرویس‌های نرخ ارز در دسترس نیستند.';
            };

            const fetchFromNavasan = async () => {
                const apiKey = 'freeqJ2wDCK4oBJyieTEy7RII2LIAqzh';
                const navasanApiUrl = `https://api.navasan.tech/latest/?api_key=${apiKey}`;
                const response = await fetch(navasanApiUrl);
                if (!response.ok) throw new Error('Navasan API failed');
                const data = await response.json();
                if (data.cny && data.cny.value) {
                    const priceData = {
                        price: parseFloat(data.cny.value),
                        dateStr: data.cny.date,
                        timestamp: new Date().getTime()
                    };
                    localStorage.setItem('yuanPriceCache', JSON.stringify(priceData));
                    updatePriceDisplay(priceData.price, priceData.dateStr, 'نوسان');
                } else {
                    throw new Error('CNY price not found in Navasan response.');
                }
            };

            const fetchFromFallback = async () => {
                 // Fallback is removed to rely solely on Navasan with cache
                 throw new Error("Fallback disabled to preserve primary API calls.");
            };
            
            // --- Execution Logic with Caching ---
            const CACHE_DURATION = 4 * 60 * 60 * 1000; // 4 hours in milliseconds
            const cachedData = JSON.parse(localStorage.getItem('yuanPriceCache'));
            const now = new Date().getTime();

            if (cachedData && (now - cachedData.timestamp < CACHE_DURATION)) {
                console.log("Using cached Yuan price from Navasan.");
                updatePriceDisplay(cachedData.price, cachedData.dateStr, 'نوسان (کش شده)');
            } else {
                console.log("Cache is old or missing. Fetching new Yuan price.");
                try {
                    await fetchFromNavasan();
                    console.log("Fetched from Navasan successfully.");
                } catch (navasanError) {
                    console.error("Navasan API failed:", navasanError);
                    setFallbackPrice();
                }
            }
        });
    </script>

</body>
</html>

